

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vector Index &mdash; CUBRID Vector Database  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Vector Operations" href="vector-operations.html" />
    <link rel="prev" title="Vector DML" href="vector-dml.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CUBRID Vector Database
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="vector-ddl.html">Vector DDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector-dml.html">Vector DML</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Vector Index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-a-vector-index">Create a Vector Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bnf">BNF</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#inspect-vector-index-options">Inspect Vector Index Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configure-search-parameter">Configure Search parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-vector-index">Update Vector Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="#delete-vector-index">Delete Vector Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vector-index-configuration">Vector Index Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memory-usage">Memory Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vector-operations.html">Vector Operations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CUBRID Vector Database</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Vector Index</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/vector-index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="vector-index">
<h1>Vector Index<a class="headerlink" href="#vector-index" title="Link to this heading"></a></h1>
<p>This page outlines the CRUD operations for vector indices in CUBRID
database.</p>
<p>CUBRID only supports HNSW index at the moment.</p>
<section id="create-a-vector-index">
<h2>Create a Vector Index<a class="headerlink" href="#create-a-vector-index" title="Link to this heading"></a></h2>
<p>In order to create a vector index, one must specify:</p>
<ol class="arabic simple">
<li><p>the table and the column name where the index will be created onto,</p></li>
<li><p>the metric function used for distance calculation,</p></li>
<li><p>the index construction parameters (for HNSW, this will be
<code class="docutils literal notranslate"><span class="pre">ef_construction</span></code> and <code class="docutils literal notranslate"><span class="pre">M</span></code>).</p></li>
</ol>
<p>In order to effectively use the HNSW index, one must specify:</p>
<ul class="simple">
<li><p>the search parameter (for HNSW, this will be <code class="docutils literal notranslate"><span class="pre">ef_search</span></code>).</p></li>
</ul>
<section id="bnf">
<h3>BNF<a class="headerlink" href="#bnf" title="Link to this heading"></a></h3>
<div class="highlight-bnf notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nc">create_vector_index</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;CREATE VECTOR INDEX&quot; <span class="p">&lt;</span><span class="nc">index_name</span><span class="p">&gt;</span>
&quot;ON&quot; <span class="p">&lt;</span><span class="nc">table_name</span><span class="p">&gt;</span> &quot;(&quot; <span class="p">&lt;</span><span class="nc">column_name</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nc">metric_function</span><span class="p">&gt;</span> &quot;)&quot; <span class="p">&lt;</span><span class="nc">with_options</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nc">index_name</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">table_name</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">column_name</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nc">metric_function</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">cosine</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nc">cosine</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;cosine&quot;

<span class="p">&lt;</span><span class="nc">with_options</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;WITH&quot; &quot;(&quot; <span class="p">&lt;</span><span class="nc">option_list</span><span class="p">&gt;</span> &quot;)&quot;

<span class="p">&lt;</span><span class="nc">option_list</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">option</span><span class="p">&gt;</span> | <span class="p">&lt;</span><span class="nc">option</span><span class="p">&gt;</span> &quot;,&quot; <span class="p">&lt;</span><span class="nc">option_list</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nc">option</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">parameter</span><span class="p">&gt;</span> &quot;=&quot; <span class="p">&lt;</span><span class="nc">value</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nc">parameter</span><span class="p">&gt;</span> <span class="o">::=</span> &quot;m&quot; | &quot;ef_construction&quot;
<span class="p">&lt;</span><span class="nc">value</span><span class="p">&gt;</span> <span class="o">::=</span> <span class="p">&lt;</span><span class="nc">integer</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nc">identifier</span><span class="p">&gt;</span> <span class="o">::=</span> [A-Za-z_][A-Za-z_0-9]*
<span class="p">&lt;</span><span class="nc">integer</span><span class="p">&gt;</span> <span class="o">::=</span> [0-9]+
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">m</span></code> is the maximum number of connections (edges) each node (vector)
can have in the graph at each layer of the HNSW structure. It is also
known as the degree of each node in the graph.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ef_construction</span></code> controls the size of the dynamic candidate list
when inserting elements during the index construction phase. It
defines how many neighbors are checked during the construction of the
graph when new vectors are added.</p></li>
</ul>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="n">VECTOR</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">embedding_hnsw_idx</span>
<span class="k">ON</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="p">(</span><span class="n">embedding</span><span class="w"> </span><span class="n">cosine</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="n">ef_construction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="inspect-vector-index-options">
<h2>Inspect Vector Index Options<a class="headerlink" href="#inspect-vector-index-options" title="Link to this heading"></a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">embedding_hnsw_idx</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">items</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="configure-search-parameter">
<h2>Configure Search parameter<a class="headerlink" href="#configure-search-parameter" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ef_search</span></code> is the exploration factor during search. It is a
parameter in the HNSW algorithm that controls the number of nearest
neighbor candidates to explore during a search query. If ef_search is
not specified, it is set to the same value as the <code class="docutils literal notranslate"><span class="pre">ef_construction</span></code>
of the index by default.</p></li>
<li><p>☐ TODO: Discuss the default value of ef_search if not specified.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="cm">/*+ VECTOR_INDEX_SCAN (embedding) */</span><span class="w"> </span><span class="n">name</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">items</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">l2_distance</span><span class="p">(</span><span class="n">embedding</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;[3, 1, 2]&#39;</span><span class="p">)</span>
<span class="k">LIMIT</span><span class="w"> </span><span class="mi">5</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="n">ef_search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">64</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="update-vector-index">
<h2>Update Vector Index<a class="headerlink" href="#update-vector-index" title="Link to this heading"></a></h2>
<p>Not implemented yet.</p>
</section>
<section id="delete-vector-index">
<h2>Delete Vector Index<a class="headerlink" href="#delete-vector-index" title="Link to this heading"></a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DROP</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">embedding_hnsw_idx</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="vector-index-configuration">
<h2>Vector Index Configuration<a class="headerlink" href="#vector-index-configuration" title="Link to this heading"></a></h2>
<section id="memory-usage">
<h3>Memory Usage<a class="headerlink" href="#memory-usage" title="Link to this heading"></a></h3>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># filename: cubrid.conf</span>
<span class="n">vector_memory_size</span><span class="o">=</span><span class="mi">8</span><span class="n">G</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vector-dml.html" class="btn btn-neutral float-left" title="Vector DML" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="vector-operations.html" class="btn btn-neutral float-right" title="Vector Operations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CUBRID.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>